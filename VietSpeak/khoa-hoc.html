<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh√≥a H·ªçc VietSpeakAI - N√¢ng T·∫ßm Ti·∫øng N√≥i</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Inline style for page-specific overrides if needed, but try to avoid -->
</head>
<body>

    <header>
        <a href="index.html" class="logo">VIETSPEAKAI</a>
        <nav>
            <a href="index.html">Trang ch·ªß</a>
            <a href="khoa-hoc.html">Kho√° h·ªçc</a>
            <a href="ai.html">AI Ph√¢n T√≠ch</a>
            <a href="thu-vien.html">Th∆∞ vi·ªán t√†i li·ªáu</a>
            <a href="login.html">ƒêƒÉng nh·∫≠p</a>
        </nav>
    </header>

    <div class="container">
        <h1 class="section-title">Ch·ªçn L·ªô Tr√¨nh C·ªßa B·∫°n</h1>
        
        <div class="courses-wrapper" id="coursesContainer">
            <div style="width: 100%; text-align: center; padding-top: 100px; color: #666;">
                <i>üîÑ</i> ƒêang t·∫£i d·ªØ li·ªáu kh√≥a h·ªçc...
            </div>
        </div>
    </div>

    <!-- CONFIG must be loaded before our script -->
    <script src="config.js"></script> 
    
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
             // Load courses
             try {
                 // CONFIG is defined in config.js
                 const response = await fetch(`${CONFIG.API_URL}/public/courses`);
                 const res = await response.json();
                 
                 const container = document.getElementById('coursesContainer');
                 
                 if (res.success && res.data.length > 0) {
                     container.innerHTML = res.data.map((course, index) => {
                         const isActive = index === 0 ? 'active' : '';
                         // Default bg if no thumbnail
                         const bgStyle = course.thumbnail ? `background-image: url('${course.thumbnail}');` : ''; 
                         
                         return `
                            <div class="course-card ${isActive}" onclick="activateCard(this)">
                                <span class="badge">${course.level || 'NEW'}</span>
                                <div class="card-header">
                                    <h2>${course.name}</h2>
                                </div>
                                <div class="course-details">
                                    <span class="price">${course.formatted_price}</span>
                                    <div class="info-section">
                                        <span class="info-title">üìç M√¥ t·∫£</span>
                                        <p class="info-content" style="white-space: pre-wrap;">${course.description || 'Ch∆∞a c√≥ m√¥ t·∫£ chi ti·∫øt.'}</p>
                                    </div>
                                    <div class="info-section">
                                        <span class="info-title">üë®‚Äçüè´ Gi·∫£ng vi√™n</span>
                                        <p class="info-content">${course.instructor || 'VietSpeak Team'}</p>
                                    </div>
                                    <a href="https://forms.gle/jTrXji6UaLHRuqJ4A" target="_blank" class="btn-reg">Click ƒë·ªÉ nh·∫≠n t∆∞ v·∫•n</a>
                                </div>
                            </div>
                         `;
                     }).join('');
                 } else {
                     container.innerHTML = '<div style="text-align: center; width: 100%;">Hi·ªán ch∆∞a c√≥ kh√≥a h·ªçc n√†o ƒë∆∞·ª£c m·ªü.</div>';
                 }
                 
             } catch(e) {
                 console.error(e);
                 document.getElementById('coursesContainer').innerHTML = '<div style="text-align: center; width: 100%; color: red;">L·ªói t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.</div>';
             }
        });

        function activateCard(card) {
            const cards = document.querySelectorAll('.course-card');
            cards.forEach(c => c.classList.remove('active'));
            card.classList.add('active');
        }
    </script>
    <script src="logger.js"></script>
    <script src="auth.js"></script>
</body>
</html>
